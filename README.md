HtmlUniParser
--

[![Build Status](https://travis-ci.org/kosuha606/html-uni-parser.svg?branch=master)](https://travis-ci.org/kosuha606/html-uni-parser)

Universal html parser which can parse every kind of html page

### Installation

To install this plugin use composer:

```bash
$ composer require kosuha606/html-uni-parser
```

### Usage

There is four available types of parsing html.

1. Parse one page.

Example:
```php
$results = HtmlUniParser::create([
    'pageUrl' => 'http://example.com',
    'xpathOnCard' => [
        'h1' => '//h1',
        'description' => 'HTML//p'
    ]
])->parseCard();
```

2. Parse list of links on the pange, then parser automaticaly goes into each page and 
parse that page for data.

3. Parse search. It is the same as parse list, but here you are 
set the qurey string that can change separately from url.

4. Parse generated urls. This kind of parsing used if you need
to parse pagination or something similar

### Examples
For more examples see the `examples/` direcotry

### Description of configurable properties
| Property | Description   |
| ------------ | ------------ |
| catalogUrl  | The url address for parsing by catalog strategy `parseCatalog()`  |
| searchUrl | The url what used to search on goal site. `parseSearch()`   |
| pageUrl | The url what used to parse one page. `parseCard()`   |
| urlGenerator | Callback function what can be used to generate links to parse `parseGenerator()`   |
| encoding | The encoding of goal site |
| siteBaseUrl | Base url for process links after parse |
| resultLimit | Here you can limit the results count |
| sleepAfterRequest | Number of seconds to sleep after each request |
| goIntoCard | Wheather need to go into card when parse catalog links |
| xpathItem | Xpath query what can be used for parse items in list |
| xpathLink | Xpath query what can be used for parse link inside parsed item |
| xpathOnCard | Array of xpath queries, every key will be key in result array |
| typeMech | Type of parsing mechanizm, for example: `wget`, `curl`, `phantomjs`, `filegetcontents` |

### Available methods

| Method | Description   |
| ------------ | ------------ |
| parseCatalog  | To parse catalog links and parse every link this function reutrn results as array of parsed links  |
| parseSearch | This method takes an argument of query string for search page and after building search link it behave like parseCatalog  |
| parseCard | To parse one page of site  |
| parseGenerator | To parse links what was generated by urlGenerator callback |

### Run tests

To run tests you can use this command:
```bash
./vendor/bin/phpunit
```
